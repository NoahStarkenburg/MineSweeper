@model MineSweeper.Models.GameViewModel

<h2>Minesweeper Game</h2>

@if (Model != null && Model.Game != null)
{
    Random random = new Random();
    <table border="1">
        @for (int r = 0; r < Model.Game.GetBoardState().NumRows; r++)
        {
            <tr>
                @for (int c = 0; c < Model.Game.GetBoardState().NumColumns; c++)
                {
                    var cell = Model.Game.GetBoardState().Cells[r, c];

                    <td style="width: 30px; height: 30px; text-align: center; border: 1px solid black;">

                        @if (cell.IsVisited)
                        {
                            @if (cell.IsBomb)
                            {
                                <img src="~/assets/images/Skull.png" />
                            }
                            else if (cell.NumBombNeighbors > 0)
                            {
                                <img src="~/assets/images/Number @(cell.NumBombNeighbors).png" />
                            }
                            else if (cell.IsSpecial)
                            {
                                <img src="~/assets/images/Gold.png" />
                            }
                            else
                            {
                                <img src="~/assets/images/Tile Flat.png" />
                            }
                        }
                        else if (cell.IsFlagged)
                        {
                            <img src="~/assets/images/flag.jpg" />
                        }
                        else
                        {
                            <form asp-action="PlayMove" method="post" style="display:inline;">
                                <input type="hidden" name="row" value="@r" />
                                <input type="hidden" name="col" value="@c" />
                                <input type="hidden" name="difficulty" value="@Model.Game.GetDifficulty()" />
                                <button type="submit" style="border: none; background: none; padding: 0;">
                                    <img src="~/assets/images/Tile @(random.Next(1,3)).png"/>
                                </button>
                            </form>
                        }
                    </td>
                }
            </tr>
        }
    </table>
}
else
{
    <p>Error: Game not found.</p>
    <a asp-action="StartGame">Start a New Game</a>
}
